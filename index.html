<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-eval' https://cdn.jsdelivr.net https://unpkg.com; style-src 'self' 'unsafe-inline'; img-src 'self' data:; connect-src 'self' https://base-mainnet.g.alchemy.com wss://*.walletconnect.com wss://*.walletconnect.org;">
  <title>SpawnEngine - Onchain OS</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  <meta name="alchemy-key" content="aH4-X2bNp1BarPcBcHiWR6vHxJz_lGbA">
  <meta name="etherscan-key" content="Y1VRJKQB1A4K2JTA8GE1YDH3W54W4I35D5">
</head>
<body>
  <div id="onboardingOverlay" class="fade-in-logo">
    <div class="onboarding-content">
      <img src="logo.png" alt="SpawnEngine Logo" />
      <h1 style="color: #00d0ff; margin-top: 1rem;">SpawnEngine OS</h1>
    </div>
  </div>

  <div id="appContent" style="display: none;">
    <header class="app-header">
      <div class="logo-title">
        <h1 class="app-title-compact">SPAWNENGINE</h1>
      </div>
      <div class="wallet-ui">
        <div class="wallet-status">
          <span id="xpDisplay" class="xp-display-compact">0 XP üî•</span>
          <div id="walletUI">
            <span id="walletAddress" class="wallet-address-compact">Not Connected</span>
            <button id="connectWallet" class="connect-wallet-compact">Connect Wallet</button>
          </div>
        </div>
        <div class="settings-wrapper">
          <button id="settingsBtn" class="settings-icon">‚öôÔ∏è</button>
          <div id="settingsMenu" class="settings-dropdown">
            <button>üö™ Disconnect</button>
          </div>
        </div>
      </div>
    </header>
    
    <div class="compact-header-bar">
        <span class="header-label">XP</span>
        <span class="header-value" id="totalXPCompact">1575</span>
        <span class="header-label">SPAWN</span>
        <span class="header-value" id="spawnBalanceCompact">497</span>
        <span class="header-label">MODE</span>
        <span class="header-value">v0.2</span>
        <button class="header-button">9 events</button>
    </div>

    <nav class="nav-tabs compact-tabs">
      <button class="tab-button active" data-tab="track">üìà Spawn Tracker</button>
      <button class="tab-button" data-tab="home">üè† Mesh Profile</button>
      <button class="tab-button" data-tab="rewards">üéÅ Rewards</button>
      <button class="tab-button" data-tab="premium">üíé Premium</button>
      <button class="tab-button" data-tab="profile">üë§ Settings</button>
    </nav>

    <main>
      <section class="tab-content track" data-tab="track" style="display: block;">
        <h2 class="section-title-compact">üìà Onchain Activity Tracker</h2>
        <div class="card-grid track-grid-compact">
          <div class="card dark compact-card">
            <h3>‚õΩ Gas Overview</h3>
            <p><strong>Base Fee:</strong> <span id="baseGas">--</span> Gwei</p>
            <p><strong>Avg Gas:</strong> <span id="avgGas">-- Gwei</span></p>
          </div>
          <div class="card dark compact-card">
            <h3>üìä Volume (30D)</h3>
            <p><span id="volume30d">$0</span></p>
            <p><strong>PnL Today:</strong> <span id="pnlToday">+ $0.00</span></p>
          </div>
          <div class="card dark full compact-card">
            <div class="track-header-row">
              <h3>üìú Latest Activity (Log)</h3>
              <button id="refreshTrackBtn">‚Üª</button>
            </div>
            <p id="latestActivity">No recent tx</p>
            <small id="activityResult">$0</small>
          </div>
          <div class="card dark full compact-card">
            <h3>üì¶ Tokens/Mints (30D)</h3>
            <p>Total Mints: <span id="tokensMinted">0</span></p>
            <p>Total ETH Moved: <span id="ethMoved">0 ETH</span></p>
          </div>
          <div class="card dark compact-card">
            <h3>üß© Connected dApps</h3>
            <ul id="connectedDapps" class="compact-list">
              <li>-</li>
            </ul>
          </div>
          <div class="card dark compact-card">
            <h3>üí∞ Total Gas Fees (30D)</h3>
            <p><span id="gasFees30d">$0.00</span></p>
          </div>
        </div>
      </section>

      <section class="tab-content home" data-tab="home" style="display: none;">
        <h2 class="section-title-compact">üë§ Mesh Profile</h2>
        <div class="card-grid home-grid-compact">
            <div class="card dark compact-card full-row grid-3-col">
                <div>
                    <h3 class="stat-label">XP STREAK</h3>
                    <p class="stat-value" id="xpStreakHome">1575</p>
                    <small>Daily tasks completed</small>
                </div>
                <div>
                    <h3 class="stat-label">SPAWN BALANCE</h3>
                    <p class="stat-value" id="spawnBalanceHome">497</p>
                    <small>Test rewards from packs & quests</small>
                </div>
                <div>
                    <h3 class="stat-label">TODAY'S EVENTS</h3>
                    <p class="stat-value">9</p>
                    <small>pack_open ¬∑ swaps ¬∑ casts</small>
                </div>
            </div>
            
            <div class="card dark compact-card full-row">
                <h3 class="stat-label">LINKED APPS</h3>
                <p class="text-xs">Base wallet <span class="badge required">REQUIRED</span></p>
            </div>
            <div class="card dark compact-card full-row">
                <h3 class="stat-label">SOCIAL SURFACES</h3>
                <p class="text-xs">Farcaster & Zora <span class="badge planned">PLANNED</span></p>
            </div>
            
            <div class="card dark compact-card full-row">
                <h3 class="stat-label">TODAY'S LOOP</h3>
                <ul class="quest-list">
                    <li>Open a test pack <span class="quest-xp">+50 XP</span></li>
                    <li>Connect wallet <span class="quest-xp">+100 XP</span></li>
                    <li>Share your mesh stats <span class="quest-xp">+100 XP</span></li>
                </ul>
            </div>
        </div>
      </section>
      
      <section class="tab-content rewards" data-tab="rewards" style="display: none;">...</section>
      <section class="tab-content premium" data-tab="premium" style="display: none;">...</section>
      <section class="tab-content profile" data-tab="profile" style="display: none;">
          <div class="profile-header-compact">
            <div class="profile-info-compact">
              <div class="profile-avatar">S</div>
              <div>
                <p class="profile-name">@spawniz</p>
                <p class="profile-meta">Mesh ID ¬∑ Creator</p>
              </div>
            </div>
            <div class="profile-status">
                <span class="status-dot"></span>
                <span class="mesh-pro-tag">Mesh v1.0 PRO</span>
                <button class="settings-icon-compact">‚öôÔ∏è</button>
            </div>
          </div>
          <h2 class="section-title-large">Settings & API</h2>
          
          <div class="card-grid">
            <div class="card dark full compact-card profile-pillar">
              <h3>XP SDK & Integration (Pillar 1)</h3>
              <p>Manage API keys to integrate SpawnEngine XP into your own apps.</p>
              <button class="green-button-compact">Show API Key</button>
            </div>
            <div class="card dark full compact-card profile-pillar">
              <h3>Premium Mesh Filters (Pillar 4)</h3>
              <p>Unlock Alpha Hunters and Whale Tracking. Requires 500 SPN staking.</p>
              <button class="blue-button-compact">Upgrade to Premium</button>
            </div>
            <div class="card dark full compact-card profile-pillar">
              <h3>Launchpad Builder (Pillar 8)</h3>
              <p>Access the Zero-Code Token/NFT Builder and Bonding Curve configuration.</p>
              <button class="purple-button-compact">Open Creator Panel</button>
            </div>
             <div class="card dark full compact-card text-center">
              <button class="gray-button-compact">Manage Notifications</button>
            </div>
          </div>
      </section>
      
      <div id="qrModal" class="modal hidden">...</div>
      </main>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
  <script src="https://unpkg.com/@walletconnect/web3modal@2.6.4/dist/index.umd.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.0/build/qrcode.min.js"></script>
  <script src="app.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@walletconnect/web3-provider@1.8.0/dist/umd/index.min.js"></script>
</body>
</html>
