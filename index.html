<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SpawnEngine - Mesh OS</title>
    <!-- Ladda Tailwind CSS för enkel och snabb styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Importera Inter-fonten för en modern look */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            overflow-x: hidden; /* Förhindra horisontell scroll */
            min-height: 100vh;
        }
        
        #mesh-canvas {
            position: fixed;
            top: 0;
            left: 0;
            z-index: 10; 
            display: block;
        }

        #content-overlay {
            position: relative;
            z-index: 20; 
            min-height: 100vh;
            /* Flex layout för att hantera sidomeny och huvudfönster */
            display: flex;
            background-color: rgba(17, 24, 39, 0.85); /* Halvtransparent mörk bakgrund */
            backdrop-filter: blur(8px);
        }

        /* Anpassad styling för en "futuristisk" estetik */
        .neon-border {
            border: 1px solid rgba(10, 242, 255, 0.2);
            box-shadow: 0 0 5px rgba(10, 242, 255, 0.3);
        }

        .active-link {
            border-left: 4px solid #4f46e5; /* Indigo */
            background-color: rgba(79, 70, 229, 0.1);
            font-weight: 600;
        }
        
        .xp-button {
            transition: all 0.2s;
            cursor: pointer;
        }
        .xp-button:hover {
            background-color: rgba(22, 163, 74, 0.2);
        }
        
        /* Dölj sidomenyn på mobilen som standard och visa den endast när den är 'öppen' */
        .sidebar {
            width: 256px; /* 64px (md:w-64) */
            transition: transform 0.3s ease-in-out;
            transform: translateX(-100%);
        }
        .sidebar-open {
            transform: translateX(0);
        }
        @media (min-width: 768px) {
            .sidebar {
                transform: translateX(0);
            }
        }
        
    </style>
</head>
<body class="bg-gray-900 text-gray-100">

    <!-- 1. Canvas-elementet för den animerade meshen -->
    <canvas id="mesh-canvas"></canvas>

    <!-- 2. Innehålls-overlay som ligger ovanpå meshen -->
    <div id="content-overlay" class="min-h-screen">
        
        <!-- Sidomeny (Sidebar) -->
        <aside id="sidebar" class="sidebar md:sidebar md:w-64 fixed md:relative h-full bg-gray-900/90 border-r border-gray-800 z-50 p-4 flex-shrink-0">
            <!-- Sidomeny Top - Logo -->
            <div class="flex items-center space-x-2 border-b border-gray-800 pb-4 mb-4">
                <span class="bg-indigo-600 p-2 rounded-lg font-extrabold text-sm">SE</span>
                <span class="text-lg font-semibold text-white">SPAWNENGINE</span>
            </div>

            <!-- Navigationslänkar -->
            <nav class="space-y-2">
                <a href="#" class="active-link flex items-center p-2 rounded-r-lg text-gray-100 hover:bg-gray-800">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path></svg>
                    Home
                </a>
                <a href="#" class="flex items-center p-2 rounded-r-lg text-gray-400 hover:bg-gray-800">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path></svg>
                    Loot
                </a>
                <a href="#" class="flex items-center p-2 rounded-r-lg text-gray-400 hover:bg-gray-800">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>
                    Market
                </a>
                <a href="#" class="flex items-center p-2 rounded-r-lg text-gray-400 hover:bg-gray-800">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M12 20.732v-1m-6.364-1.636l.707-.707M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>
                    Brain
                </a>
                <a href="#" class="flex items-center p-2 rounded-r-lg text-gray-400 hover:bg-gray-800">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>
                    Settings
                </a>
            </nav>
            
            <!-- Rapporter/Konfig (Reports/Config) -->
            <div class="mt-8 pt-4 border-t border-gray-800">
                <p class="text-xs font-semibold uppercase text-gray-500 mb-2">Reports / Config</p>
                <nav class="space-y-2 text-sm">
                    <a href="#" class="flex items-center p-2 text-gray-400 hover:text-white">Trading Hub</a>
                    <a href="#" class="flex items-center p-2 text-gray-400 hover:text-white">Deploy Center</a>
                    <a href="#" class="flex items-center p-2 text-gray-400 hover:text-white">Creator Forge</a>
                    <a href="#" class="flex items-center p-2 text-gray-400 hover:text-white">Activity Mesh</a>
                </nav>
            </div>
            
        </aside>

        <!-- Huvudinnehåll (Main Content) -->
        <main class="flex-1 overflow-y-auto p-4 md:p-8">
            
            <!-- Topp-HUD (Top HUD) -->
            <div class="bg-gray-900/50 p-4 md:p-6 rounded-xl neon-border mb-8">
                <div class="flex flex-col md:flex-row justify-between items-start md:items-center">
                    <div class="flex items-center space-x-4 mb-4 md:mb-0">
                        <div class="bg-indigo-600 p-3 rounded-lg font-extrabold text-white text-xl">SE</div>
                        <div>
                            <h1 class="text-xl font-bold text-white">SPAWNENGINE</h1>
                            <p class="text-sm text-gray-400">Modular onchain engine for packs, XP, badges & creator modules</p>
                        </div>
                    </div>
                    <div class="flex space-x-3 items-center">
                        <span class="bg-green-700/50 text-green-300 text-xs font-semibold px-3 py-1 rounded-full">BASE • MESH LAYER</span>
                        <button class="bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-2 px-4 rounded-lg flex items-center">
                            <svg class="w-5 h-5 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                            Connect Wallet
                        </button>
                    </div>
                </div>
                
                <div class="mt-4 pt-4 border-t border-gray-800/70 flex flex-wrap gap-4 text-sm font-medium">
                    <div class="flex items-center space-x-2">
                        <span class="text-gray-500">WALLET:</span>
                        <span class="text-red-400 font-bold">Disconnected</span>
                    </div>
                    <div class="flex items-center space-x-2">
                        <span class="text-gray-500">GAS:</span>
                        <span class="text-yellow-400">~0.25 gwei est.</span>
                    </div>
                    <div class="flex items-center space-x-2">
                        <span class="text-gray-500">MESH:</span>
                        <span class="text-cyan-400 font-bold">9 events</span>
                    </div>
                    
                    <div class="flex items-center space-x-2 ml-auto">
                        <span class="text-gray-500">XP:</span>
                        <span class="text-white font-bold">1575</span>
                    </div>
                    <div class="flex items-center space-x-2">
                        <span class="text-gray-500">SPAWN:</span>
                        <span class="text-white font-bold">497</span>
                    </div>
                    <div class="flex items-center space-x-2">
                        <span class="text-gray-500">MODE:</span>
                        <span class="text-white font-bold">v0.2 • mock data</span>
                    </div>
                </div>
            </div>
            
            <!-- Huvudnavigering (Tabs) -->
            <div class="flex space-x-2 border-b border-gray-700 mb-8">
                <button class="px-4 py-2 text-sm border-b-2 border-indigo-500 text-indigo-400 font-semibold">Profile</button>
                <button class="px-4 py-2 text-sm text-gray-400 hover:text-white">Overview</button>
                <button class="px-4 py-2 text-sm text-gray-400 hover:text-white">Trading</button>
                <button class="px-4 py-2 text-sm text-gray-400 hover:text-white">Pull Lab</button>
                <button class="px-4 py-2 text-sm text-gray-400 hover:text-white">Pack Maps</button>
            </div>
            
            <!-- LIVE PULLS / ACTIVITY FEED -->
            <div class="mb-8">
                <p class="text-sm font-mono text-pink-400 bg-gray-900/50 p-2 rounded-lg neon-border border-pink-700/50">
                    LIVE PULL: <span class="text-pink-200">pack_open • 0xA9...93 → Neon Fragments (Fragment) • burn • 0x4B...</span>
                </p>
            </div>

            <!-- MESH PROFILE SECTION -->
            <section class="mb-10">
                <h2 class="text-2xl font-bold text-white mb-6 flex items-center">
                    <svg class="w-6 h-6 mr-2 text-indigo-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>
                    MESH PROFILE
                </h2>

                <!-- Profile Card -->
                <div class="bg-gray-900/50 p-6 rounded-xl neon-border border-gray-700/50 mb-6">
                    <div class="flex items-center mb-4">
                        <span class="bg-indigo-600 p-2 rounded-full font-extrabold text-sm mr-3">SE</span>
                        <div>
                            <span class="text-lg font-semibold text-white mr-2">@spawnengine</span>
                            <span class="text-green-400 text-xs font-bold bg-green-900/50 px-2 py-0.5 rounded-full">ONLINE</span>
                            <p class="text-xs text-gray-400">Mesh owner on Base · Layer-4 style XP & packs</p>
                        </div>
                    </div>
                    <p class="text-sm text-gray-500">Connected modules: Factory · TokenPackSeries · ReserveGuard · UtilityRouter (mock v0.2)</p>
                </div>
                
                <!-- Stats Grid -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div class="bg-gray-800/70 p-5 rounded-xl border-l-4 border-cyan-400">
                        <p class="text-xl font-bold text-cyan-400">1575</p>
                        <p class="text-sm text-gray-400 mt-1">XP STREAK</p>
                        <p class="text-xs text-gray-500">Grows as you complete daily mesh tasks.</p>
                    </div>
                    <div class="bg-gray-800/70 p-5 rounded-xl border-l-4 border-indigo-400">
                        <p class="text-xl font-bold text-indigo-400">497</p>
                        <p class="text-sm text-gray-400 mt-1">SPAWN BALANCE</p>
                        <p class="text-xs text-gray-500">Test rewards from packs & quests (mock).</p>
                    </div>
                    <div class="bg-gray-800/70 p-5 rounded-xl border-l-4 border-yellow-400">
                        <p class="text-xl font-bold text-yellow-400">9</p>
                        <p class="text-sm text-gray-400 mt-1">TODAY'S EVENTS</p>
                        <p class="text-xs text-gray-500">pack_open • burns • swaps • casts.</p>
                    </div>
                </div>
            </section>
            
            <!-- LINKED APPS & SOCIAL SURFACES -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                
                <!-- LINKED APPS -->
                <div>
                    <h3 class="text-lg font-bold text-white mb-4 flex items-center">LINKED APPS</h3>
                    <div class="bg-gray-800/70 p-5 rounded-xl neon-border border-gray-700/50">
                        <div class="flex justify-between items-center mb-2">
                            <span class="text-base font-semibold text-white">Base Wallet</span>
                            <span class="text-red-400 text-xs font-bold bg-red-900/50 px-2 py-0.5 rounded-full">REQUIRED</span>
                        </div>
                        <p class="text-sm text-gray-400">Connect wallet to lock in your mesh identity. XP and Spawn rewards will be tied to this wallet's onchain activity.</p>
                    </div>
                </div>

                <!-- SOCIAL SURFACES -->
                <div>
                    <h3 class="text-lg font-bold text-white mb-4 flex items-center">SOCIAL SURFACES</h3>
                    <div class="bg-gray-800/70 p-5 rounded-xl neon-border border-gray-700/50">
                        <div class="flex justify-between items-center mb-2">
                            <span class="text-base font-semibold text-white">Farcaster & Zora</span>
                            <span class="text-yellow-400 text-xs font-bold bg-yellow-900/50 px-2 py-0.5 rounded-full">PLANNED</span>
                        </div>
                        <p class="text-sm text-gray-400">Your casts and creator actions will become first-class events in the activity layer.</p>
                    </div>
                </div>
            </div>
            
            <!-- TODAY'S LOOP -->
            <section class="mt-8">
                <h2 class="text-xl font-bold text-white mb-4 flex justify-between items-center">
                    Today's loop
                    <span class="text-green-400 text-sm">+250 XP available</span>
                </h2>
                <div class="bg-gray-900/50 p-6 rounded-xl neon-border border-gray-700/50 space-y-4">
                    
                    <div class="xp-button flex items-center justify-between p-3 rounded-lg border border-gray-800 hover:border-indigo-500/50">
                        <label class="flex items-center space-x-3 cursor-pointer">
                            <input type="checkbox" class="form-checkbox text-indigo-600 bg-gray-700 border-gray-600 rounded" disabled>
                            <span class="text-white">Open a test pack</span>
                        </label>
                        <span class="text-green-400 text-sm font-semibold">+50 XP</span>
                    </div>

                    <div class="xp-button flex items-center justify-between p-3 rounded-lg border border-gray-800 hover:border-indigo-500/50">
                        <label class="flex items-center space-x-3 cursor-pointer">
                            <input type="checkbox" class="form-checkbox text-indigo-600 bg-gray-700 border-gray-600 rounded" checked>
                            <span class="text-white">Connect wallet</span>
                            <span class="text-xs text-gray-500">(Any Base wallet counts)</span>
                        </label>
                        <span class="text-green-400 text-sm font-semibold">+100 XP</span>
                    </div>

                    <div class="xp-button flex items-center justify-between p-3 rounded-lg border border-gray-800 hover:border-indigo-500/50">
                        <label class="flex items-center space-x-3 cursor-pointer">
                            <input type="checkbox" class="form-checkbox text-indigo-600 bg-gray-700 border-gray-600 rounded" disabled>
                            <span class="text-white">Share your mesh</span>
                            <span class="text-xs text-gray-500">(Post a link to your stats)</span>
                        </label>
                        <span class="text-green-400 text-sm font-semibold">+100 XP</span>
                    </div>
                </div>
            </section>

        </main>
        
    </div>

    <!-- 3. Integrerad JavaScript från mesh-bg.js (oförändrad) -->
    <script>
        // Mesh-bakgrundslogik (mesh-bg.js) - anpassad för att köras direkt.
        (function () {
            // Hämta canvasen.
            const canvas = document.getElementById("mesh-canvas");
            if (!canvas) {
                console.error("Canvas element with ID 'mesh-canvas' not found.");
                return;
            }

            const ctx = canvas.getContext("2d");
            let width = 0;
            let height = 0;
            let points = [];
            // Fler punkter för tätare och snyggare mesh på stora skärmar
            const POINT_ROWS = 12;
            const POINT_COLS = 18;

            function resize() {
                // Hantera Device Pixel Ratio för skarpare rendering på HiDPI-skärmar
                const dpr = window.devicePixelRatio || 1;
                width = window.innerWidth;
                height = window.innerHeight;

                canvas.width = width * dpr;
                canvas.height = height * dpr;
                canvas.style.width = width + "px";
                canvas.style.height = height + "px";
                ctx.setTransform(dpr, 0, 0, dpr, 0, 0);

                initPoints();
            }

            function initPoints() {
                points = [];
                const xStep = width / (POINT_COLS - 1);
                const yStep = height / (POINT_ROWS - 1);

                for (let y = 0; y < POINT_ROWS; y++) {
                    for (let x = 0; x < POINT_COLS; x++) {
                        const px = x * xStep;
                        const py = y * yStep;
                        points.push({
                            x: px,
                            y: py,
                            baseX: px,
                            baseY: py,
                            // Ökat offset för lite mer dynamik
                            offsetX: (Math.random() - 0.5) * 25, 
                            offsetY: (Math.random() - 0.5) * 25,
                            speed: 0.3 + Math.random() * 0.3, // Lite långsammare hastighet
                            phase: Math.random() * Math.PI * 2,
                        });
                    }
                }
            }

            function update() {
                const t = performance.now() / 2000; // Använda en större nämnare för långsammare animation

                for (const p of points) {
                    const wobble = Math.sin(t * p.speed + p.phase);
                    const wobble2 = Math.cos(t * (p.speed * 0.7) + p.phase * 1.3);

                    p.x = p.baseX + p.offsetX * wobble;
                    p.y = p.baseY + p.offsetY * wobble2;
                }
            }

            function draw() {
                // Sätt bakgrunden till transparent (eller svart om man vill ha mörkare effekt)
                ctx.clearRect(0, 0, width, height);

                // bakgrundsglow - centrerad neonblå glöd
                const grad = ctx.createRadialGradient(
                    width * 0.5,
                    height * 0.5,
                    0,
                    width * 0.5,
                    height * 0.5,
                    Math.max(width, height) * 0.7
                );
                grad.addColorStop(0, "rgba(45, 120, 255, 0.1)");
                grad.addColorStop(0.3, "rgba(10, 242, 255, 0.05)");
                grad.addColorStop(1, "rgba(2, 3, 12, 0.0)");
                ctx.fillStyle = grad;
                ctx.fillRect(0, 0, width, height);

                ctx.lineWidth = 0.8; // Tunnare linjer
                ctx.strokeStyle = "rgba(120, 210, 255, 0.15)"; // Ljusare, mindre synliga linjer
                ctx.beginPath();

                // rita horisontella linjer (mesh)
                for (let row = 0; row < POINT_ROWS; row++) {
                    ctx.moveTo(points[row * POINT_COLS].x, points[row * POINT_COLS].y);
                    for (let col = 1; col < POINT_COLS; col++) {
                        const idx = row * POINT_COLS + col;
                        ctx.lineTo(points[idx].x, points[idx].y);
                    }
                }

                // rita vertikala linjer (mesh)
                for (let col = 0; col < POINT_COLS; col++) {
                    ctx.moveTo(points[col].x, points[col].y);
                    for (let row = 1; row < POINT_ROWS; row++) {
                        const idx = row * POINT_COLS + col;
                        ctx.lineTo(points[idx].x, points[idx].y);
                    }
                }

                ctx.stroke();

                // små noder/punkter
                ctx.fillStyle = "rgba(160, 240, 255, 0.7)";
                for (const p of points) {
                    // Blinkande/pulserande effekt
                    const pulse = 0.5 + Math.abs(Math.sin(performance.now() / 500 + p.phase)) * 0.5;
                    ctx.beginPath();
                    ctx.arc(p.x, p.y, 1.2 * pulse, 0, Math.PI * 2); 
                    ctx.fill();
                }
            }

            function loop() {
                update();
                draw();
                requestAnimationFrame(loop);
            }

            // Starta allt
            window.addEventListener("resize", resize);
            resize();
            requestAnimationFrame(loop);
        })();
    </script>
</body>
</html>
